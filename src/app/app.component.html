<nav class="navbar navbar-expand-lg bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Employee Manager</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<!--        <li class="nav-item">-->
<!--          <a class="nav-link active" aria-current="page" href="#">Home</a>-->
<!--        </li>-->
        <li class="nav-item" style="cursor: pointer">
          <a class="nav-link" data-bs-toggle="modal" data-bs-target="#addEmployee">Add Employee</a>
        </li>
        <!-- Button trigger modal -->

<!--        <li class="nav-item dropdown">-->
<!--          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">-->
<!--            Dropdown-->
<!--          </a>-->
<!--          <ul class="dropdown-menu">-->
<!--            <li><a class="dropdown-item" href="#">Action</a></li>-->
<!--            <li><a class="dropdown-item" href="#">Another action</a></li>-->
<!--            <li><hr class="dropdown-divider"></li>-->
<!--            <li><a class="dropdown-item" href="#">Something else here</a></li>-->
<!--          </ul>-->
<!--        </li>-->
<!--        <li class="nav-item">-->
<!--          <a class="nav-link disabled">Disabled</a>-->
<!--        </li>-->
      </ul>
      <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>
  </div>
</nav>
<div class="container d-flex justify-content-evenly p-3" >


  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3">

      <ng-container  *ngFor="let employee of employees">
        <div   class="col d-flex justify-content-evenly mb-3">
        <div style="width:250px;" class="card shadow-sm" >
          <div class="d-flex flex-row px-4 mt-4 justify-content-between align-items-center">
            <div class="me-2">
              <img width="60" height="60" src="{{employee?.imageUrl}}" class="card-img-top rounded-pill " alt="...">
            </div>

            <div class="d-flex flex-column justify-content-center align-items-start">
              <div class="fw-bold">{{employee?.name}}</div>
              {{employee?.jobTitle}}
            </div>
          </div>

          <div class="card-body">
            <ul class="list-group list-group-flush ">
              <li class="list-group-item d-flex justify-content-between align-items-start"><span class="fw-bold">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                  <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"/>
                </svg>
              </span>{{employee?.email}}</li>
              <li class="list-group-item d-flex justify-content-between align-items-start">
                <span class="fw-bold">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone-fill" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"/>
                  </svg>
              </span>{{employee?.phone}}
              </li>


            </ul>
            <div class=" d-flex justify-content-end gap-2 align-items-center">
              <a (click)="employeeForEdit=employee" data-bs-toggle="modal" data-bs-target="#editEmployee" class="btn btn-light shadow-sm">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                  <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                  <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                </svg>
              </a>

              <a (click)="employeeForDelete=employee" data-bs-toggle="modal" data-bs-target="#deleteEmployee" class="btn btn-danger shadow-sm">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                  <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
        </div>
      </ng-container>


  </div>
</div>


<!-- addEmployeeModal -->
<div class="modal fade" id="addEmployee" tabindex="-1" aria-labelledby="addEmployeeLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="addEmployeeLabel">Add Employee</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form #addForm="ngForm" (ngSubmit)="onAddEmployee(addForm)" >
      <div class="modal-body">

          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" id="name" name="name" ngModel placeholder="Name" required/>
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" name="email" ngModel placeholder="Email" required >
          </div>
          <div class="mb-3">
            <label for="jobTitle" class="form-label">Job Title</label>
            <input type="text" class="form-control" id="jobTitle" name="jobTitle" ngModel placeholder="Job title" required>
          </div>
          <div class="mb-3">
            <label for="phone" class="form-label">Phone</label>
            <input type="text" class="form-control" id="phone" name="phone" ngModel placeholder="Phone" required>
          </div>
          <div class="mb-3">
            <label for="imageUrl" class="form-label">Image</label>
            <input type="text" class="form-control" id="imageUrl"  name="imageUrl" ngModel placeholder="imageUrl" required>
          </div>

      </div>
      <div class="modal-footer">
        <button id="add-employee-form" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
<!--        we add required to every input to check if invalid or not-->
        <button   type="submit" class="btn btn-primary " [disabled]="addForm.form.invalid">Save changes</button>
      </div>
      </form>
    </div>
  </div>
</div>

<!-- editEmployeeModal -->
<div class="modal fade" id="editEmployee" tabindex="-1" aria-labelledby="editEmployeeLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="editEmployeeLabel">Edit Employee</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form #editForm="ngForm"  >
        <div class="modal-body">

          <input type="hidden" ngModel="{{employeeForEdit?.id}}" name="id" >
          <input type="hidden" ngModel="{{employeeForEdit?.employeeCode}}" name="employeeCode" >

          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" id="nameEdit" name="name" ngModel="{{employeeForEdit?.name}}" placeholder="Name" required/>
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="emailEdit" name="email" ngModel="{{employeeForEdit?.email}}" placeholder="Email" required >
          </div>
          <div class="mb-3">
            <label for="jobTitle" class="form-label">Job Title</label>
            <input type="text" class="form-control" id="jobTitleEdit" name="jobTitle" ngModel="{{employeeForEdit?.jobTitle}}" placeholder="Job title" required>
          </div>
          <div class="mb-3">
            <label for="phone" class="form-label">Phone</label>
            <input type="text" class="form-control" id="phoneEdit" name="phone" ngModel="{{employeeForEdit?.phone}}" placeholder="Phone" required>
          </div>
          <div class="mb-3">
            <label for="imageUrl" class="form-label">Image</label>
            <input type="text" class="form-control" id="imageUrlEdit"  name="imageUrl" ngModel="{{employeeForEdit?.imageUrl}}" placeholder="imageUrl" required>
          </div>

        </div>
        <div class="modal-footer">
          <button id="edit-employee-form" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <!--        we add required to every input to check if invalid or not-->
          <button (click)="onEditEmployee(editForm.value)"   type="submit" class="btn btn-primary " [disabled]="editForm.invalid">Save changes</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- deleteEmployeeModal -->
<div class="modal fade" id="deleteEmployee" tabindex="-1" aria-labelledby="deleteEmployeeLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="deleteEmployeeLabel">Delete Employee</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Do you really want to delete this Employee?
      </div>
      <div class="modal-footer">
        <button id="delete-employee" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button (click)="onDeleteEmployee(employeeForDelete!.id)" type="button" class="btn btn-danger">Delete</button>
      </div>
    </div>
  </div>
</div>

<router-outlet></router-outlet>
